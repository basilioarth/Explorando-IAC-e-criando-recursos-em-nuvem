**Resumo da Aula: Implementa√ß√£o Pr√°tica com Pulumi**  

---

### **Objetivo da Aula**  
Demonstrar a cria√ß√£o pr√°tica de recursos em nuvem usando o Pulumi, abordando configura√ß√£o de ambiente, stacks, boas pr√°ticas e integra√ß√£o com a AWS.  

---

### **Passo a Passo da Implementa√ß√£o**  

#### **1. Configura√ß√£o Inicial do Pulumi**  
- **Problema de Cache**:  
  - Em caso de conflitos, exclua a pasta `.pulumi` no diret√≥rio do usu√°rio para reiniciar as configura√ß√µes locais.  
- **Login na Pulumi Cloud**:  
  - Crie uma conta gratuita ou fa√ßa login via GitHub.  
  - Gere um token de autentica√ß√£o para vincular o ambiente local √† conta.  

#### **2. Cria√ß√£o do Projeto**  
- **Template Inicial**:  
  ```bash  
  pulumi new aws-typescript  
  ```  
  - Escolha o template `aws-typescript` (agn√≥stico √† linguagem).  
  - Defina o nome do projeto (ex: `rocketseat-iac`) e a stack (ex: `staging` para ambiente de testes).  
  - Selecione o gerenciador de pacotes (ex: `pnpm`).  

#### **3. Configura√ß√£o de Stacks**  
- **Ambientes (Stacks)**:  
  - **Staging**: Ambiente de testes (n√£o acess√≠vel ao cliente).  
  - **Production**: Ambiente final (acess√≠vel ao cliente).  
  - Boa pr√°tica: segregar recursos por stack para evitar conflitos.  
- **Regi√£o AWS**:  
  - Defina a regi√£o padr√£o (ex: `us-east-2`) no arquivo `Pulumi.<stack>.yaml`.  

---

### **Cria√ß√£o de Recursos na AWS (S3 Bucket)**  

#### **1. C√≥digo Base (index.ts)**  
```typescript  
import * as aws from "@pulumi/aws";  

// Cria√ß√£o de um bucket S3 com tags  
const bucket = new aws.s3.Bucket("primeiro-teste-pos-rocketseat", {  
    tags: {  
        "ManagedBy": "IaC",  
        "IaC": "true",  
    },  
});  

// Exporta informa√ß√µes do bucket  
export const bucketName = bucket.id;  
export const bucketArn = bucket.arn;  
```  

#### **2. Comandos Principais**  
- **Preview das Mudan√ßas**:  
  ```bash  
  pulumi up  
  ```  
  - Exibe um plano de execu√ß√£o antes de aplicar as altera√ß√µes.  
- **Aplica√ß√£o Autom√°tica (sem confirma√ß√£o)**:  
  ```bash  
  pulumi up --yes  
  ```  
- **Destrui√ß√£o de Recursos**:  
  ```bash  
  pulumi destroy  
  ```  

---

### **Boas Pr√°ticas**  
1. **Tags em Recursos**:  
   - Adicione tags como `ManagedBy: IaC` ou `IaC: true` para identificar recursos gerenciados por c√≥digo.  
   - Evite edi√ß√µes manuais na console: altera√ß√µes fora do Pulumi ser√£o sobrescritas.  
2. **Outputs**:  
   - Exporte informa√ß√µes √∫teis (ex: `bucketName`, `bucketArn`) para reutiliza√ß√£o em outros m√≥dulos ou pipelines.  
3. **Pulumi Cloud**:  
   - Centralize o monitoramento de recursos, stacks e hist√≥rico de atualiza√ß√µes no dashboard da Pulumi Cloud.  

---

### **Exemplo de Outputs no Terminal**  
```  
Previewing update (staging):  
     Type                 Name                     Plan  
     pulumi:pulumi:Stack  rocketseat-iac-staging  
 +   ‚îî‚îÄ aws:s3:Bucket     primeiro-teste-pos-rocketseat  create  

Outputs:  
    bucketArn : "arn:aws:s3:::primeiro-teste-pos-rocketseat-abc123"  
    bucketName: "primeiro-teste-pos-rocketseat-abc123"  
```  

---

### **Solu√ß√£o de Problemas Comuns**  
- **Nomes de Recursos Aleat√≥rios**:  
  - O Pulumi adiciona sufixos √∫nicos aos nomes para evitar conflitos.  
  - Para nomes customizados, use argumentos espec√≠ficos (ex: `bucketName`).  
- **Conflitos de Configura√ß√£o**:  
  - Sempre valide o arquivo `Pulumi.<stack>.yaml` e sincronize com a Pulumi Cloud.  

---

### **Pr√≥ximos Passos**  
1. **Cria√ß√£o de Recursos Complexos**:  
   - Exemplo: EC2, ECR, ou Lambda Functions.  
2. **Integra√ß√£o com GitHub Actions**:  
   - Automatize o deploy via pipelines CI/CD.  
3. **Gerenciamento de M√∫ltiplas Stacks**:  
   - Implemente ambientes de `production` e `staging` com pol√≠ticas de seguran√ßa distintas.  

---

**Conclus√£o**:  
O Pulumi simplifica a gest√£o de infraestrutura em nuvem com c√≥digo TypeScript/JavaScript, evitando *vendor lock-in* e integrando-se naturalmente a fluxos DevOps. Na pr√≥xima aula, exploraremos recursos avan√ßados e automa√ß√£o! üöÄ